<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Aline Vitalino Doces Gourmet</title>
  <style>
    :root {
      --rosa-claro: #ffeeee;
      --primaria: #c75b7c;
      --fundo: #fff;
      --borda: #ccc;
      --texto: #333;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--rosa-claro);
      font-family: 'Segoe UI', sans-serif;
      color: var(--texto);
    }

    .splash {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--rosa-claro);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 200;
    }

    .splash img {
      max-width: 180px;
      border-radius: 16px;
      margin-bottom: 20px;
    }

    .progress-bar {
      width: 160px;
      height: 8px;
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: var(--primaria);
      animation: loadBar 2s linear forwards;
    }

    @keyframes loadBar {
      from { width: 0%; }
      to { width: 100%; }
    }

    .app-container {
      max-width: 480px;
      margin: auto;
      padding: 16px;
      background: var(--fundo);
      border-radius: 16px 16px 0 0;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    }

    img.logo {
      display: block;
      margin: 0 auto;
      max-width: 120px;
      border-radius: 16px;
    }

    h1 {
      text-align: center;
      font-size: 1.4rem;
      margin: 16px 0;
    }

    form label {
      display: block;
      margin-top: 12px;
      margin-bottom: 4px;
      font-weight: bold;
    }

    form input,
    form select {
      width: 100%;
      padding: 10px;
      font-size: 1rem;
      border: 1px solid var(--borda);
      border-radius: 10px;
      outline: none;
    }

    .btn-group {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .btn-group button,
    button[type="submit"] {
      flex: 1;
      padding: 12px;
      font-size: 1rem;
      background: var(--primaria);
      border: none;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }

    .btn-group button:hover,
    button[type="submit"]:hover {
      background: #a74465;
    }

    button[disabled] {
      background: #ccc;
      cursor: not-allowed;
    }

    #listaPedidos {
      margin-top: 16px;
      font-size: 0.95rem;
      background: #f9f9f9;
      padding: 10px;
      border-radius: 10px;
    }

    .item-carrinho {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      border-bottom: 1px solid #eee;
    }

    .item-carrinho button {
      background: none;
      border: none;
      color: red;
      font-size: 1.2rem;
      cursor: pointer;
      line-height: 1;
      padding: 0 6px;
      border-radius: 6px;
      transition: background-color 0.3s;
    }

    .item-carrinho button:hover {
      background-color: #ffdddd;
    }

    #total {
      text-align: right;
      font-weight: bold;
      margin-top: 10px;
    }

    .spacer {
      height: 20px;
    }

    footer {
      text-align: center;
      font-size: 12px;
      color: #888;
      margin: 24px auto 12px;
    }

    .whatsapp-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #25d366;
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 28px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
    }

    .whatsapp-label {
      position: fixed;
      bottom: 90px;
      right: 20px;
      background: #25d366;
      color: white;
      padding: 8px 12px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
      white-space: nowrap;
      z-index: 99;
    }
  </style>
</head>
<body>
  <div class="splash">
    <img src="https://i.imgur.com/1W2L9KK.jpeg" alt="Logo splash" />
    <div class="progress-bar"><div class="progress-fill"></div></div>
  </div>

  <div class="app-container">
    <img src="https://i.imgur.com/1W2L9KK.jpeg" alt="Logo" class="logo" />
    <h1>FaÃ§a Sua Encomenda Aqui!</h1>
    <form id="pedidoForm">
      <label for="nome">Nome</label>
      <input type="text" id="nome" required />

      <label for="telefone">Telefone</label>
      <input type="text" id="telefone" required />

      <label for="data">Data</label>
      <input type="date" id="data" disabled />

      <label for="produtos">Produtos</label>
      <select id="produtos"></select>

      <label for="quantidade">Quantidade</label>
      <input type="number" id="quantidade" min="1" value="1" />

      <div class="btn-group">
        <button type="button" id="addCarrinho">Adicionar</button>
        <button type="button" id="limpar">Apagar</button>
      </div>

      <div id="listaPedidos"></div>
      <p id="total">Total: R$ 0,00</p>

      <label for="vendedor">Vendedor</label>
      <input type="text" id="vendedor" value="Isa" disabled />

      <div class="spacer"></div>

      <input type="hidden" id="valorTotal" />
      <button type="submit" id="fazerPedido" disabled style="width: 100%; padding: 12px; font-size: 1rem; background: #c75b7c; border: none; color: white; border-radius: 10px; cursor: pointer;">Fazer Pedido</button>
    </form>
    <footer>Aline Vitalino Doces Gourmet - 2025</footer>
  </div>

  <div class="whatsapp-label">Fale com a Aline</div>
  <a href="https://wa.me/5511981531990" class="whatsapp-btn" target="_blank" aria-label="Fale com a Aline via WhatsApp">ðŸ’š</a>

  <script>
    const dataInput = document.getElementById("data");
    const hoje = new Date();
    dataInput.value = hoje.toISOString().split("T")[0];

    const listaPedidos = document.getElementById("listaPedidos");
    const totalEl = document.getElementById("total");
    const produtosEl = document.getElementById("produtos");
    const addBtn = document.getElementById("addCarrinho");
    const limparBtn = document.getElementById("limpar");
    const valorTotalInput = document.getElementById("valorTotal");
    const btnFazerPedido = document.getElementById("fazerPedido");

    const carrinho = [];
    const precos = {};

    async function carregarProdutos() {
      const res = await fetch("https://testepedidosstatus-default-rtdb.europe-west1.firebasedatabase.app/.json");
      const dados = await res.json();
      produtosEl.innerHTML = '<option value="">Selecione um produto</option>';
      Object.entries(dados).forEach(([nome, preco]) => {
        precos[nome] = preco;
        produtosEl.innerHTML += `<option value="${nome}">${nome}</option>`;
      });
    }

    function atualizarCarrinhoHTML() {
      listaPedidos.innerHTML = "";
      let total = 0;
      carrinho.forEach((item, i) => {
        const div = document.createElement("div");
        div.className = "item-carrinho";
        const valor = precos[item.produto] * item.qtd;
        total += valor;
        div.innerHTML = `${(i + 1).toString().padStart(2, '0')}x ${item.produto} R$ ${valor.toFixed(2)} <button onclick="removerItem(${i})" aria-label="Remover item ${item.produto}">&times;</button>`;
        listaPedidos.appendChild(div);
      });
      totalEl.textContent = `Total: R$ ${total.toFixed(2)}`;
      valorTotalInput.value = total.toFixed(2);
      btnFazerPedido.disabled = carrinho.length === 0;
    }

    function removerItem(index) {
      carrinho.splice(index, 1);
      atualizarCarrinhoHTML();
    }

    addBtn.addEventListener("click", () => {
      const produto = produtosEl.value;
      const qtd = parseInt(document.getElementById("quantidade").value);
      if (!produto || qtd < 1) return;
      carrinho.push({ produto, qtd });
      atualizarCarrinhoHTML();
    });

    limparBtn.addEventListener("click", () => {
      carrinho.length = 0;
      atualizarCarrinhoHTML();
    });

    window.addEventListener('load', () => {
      setTimeout(() => {
        document.querySelector('.splash').style.display = 'none';
      }, 2000);
    });

    carregarProdutos();

    // Form submission handler (placeholder, you may customize as needed)
    document.getElementById("pedidoForm").addEventListener("submit", function(event) {
      event.preventDefault();
      if (carrinho.length === 0) return alert("Adicione pelo menos um produto ao carrinho.");

      const nome = document.getElementById("nome").value.trim();
      const telefone = document.getElementById("telefone").value.trim();
      const total = valorTotalInput.value;
      const produtosTxt = carrinho.map(item => `${item.qtd}x ${item.produto}`).join(", ");

      const mensagem = `Novo Pedido Azul\n-----------------------------------\nðŸ‘¤Cliente: ${nome}\nðŸ“žFone: ${telefone}\nðŸ’µValor: R$ ${total}\nðŸ“¦Produtos: ${produtosTxt}\n-----------------------------------`;

      // Aqui vocÃª pode implementar o envio para o Telegram via API do bot
      // Exemplo com fetch POST para endpoint do Telegram (necessÃ¡rio backend ou proxy)

      alert("Pedido enviado com sucesso!\n\n" + mensagem);

      // ApÃ³s envio, limpar carrinho e formulÃ¡rio (opcional)
      carrinho.length = 0;
      atualizarCarrinhoHTML();
      this.reset();
      dataInput.value = hoje.toISOString().split("T")[0]; // reset data ao padrÃ£o
    });
  </script>
</body>
</html>
